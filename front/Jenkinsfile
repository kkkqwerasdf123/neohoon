pipeline {
  agent any



  environment {
    DOCKER_SERVER = 'tcp://172.30.0.100:2375'
    DOCKER_USERNAME = 'kkkqwerasdf123'
    DOCKER_REPOSITORY = 'neohoon'
    DOCKER_TAG_PREFIX = "drumtong-front-"
    DOCKER_IMAGE = "$DOCKER_USERNAME/$DOCKER_REPOSITORY:$DOCKER_TAG-$BUILD_NUMBER"
    DOCKER_IMAGE_LATEST = "$DOCKER_USERNAME/$DOCKER_REPOSITORY:$DOCKER_TAG"
    DOCKER_CREDS = credentials('hub.docker.kkkqwerasdf123')
  }

  stages {
    stage('checkout') {
      steps {
        git(url: 'https://github.com/kkkqwerasdf123/neohoon', branch: 'develop', changelog: true)
      }
    }
    stage('build docker image') {
      steps {
        def image = docker.build '$DOCKER_IMAGE'
      }
    }
//     stage('login docker') {
//         steps {
//             sh 'echo -n $DOCKER_CREDS_PSW | docker login -u $DOCKER_CREDS_USR --passwrod-stdin '
//         }
//     }
//     stage('push docker image') {
//         steps {
//             sh 'docker push $DOCKER_IMAGE'
//             sh 'docker push $DOCKER_IMAGE_LATEST'
//         }
//     }
//     stage('remove docker image') {
//         steps {
//             sh 'docker rmi $DOCKER_IMAGE'
//             sh 'docker rmi $DOCKER_IMAGE_LATEST'
//         }
//     }
  }
}